# vi: ft=config

# Config for running GitHub actions locally with [Act](https://github.com/nektos/act)
# Note that only `--container-options` should be quoted. Only variables are expanded (like $HOME)

# Runner image to run with (you'll need to log in to AWS)
--platform=arc-runners=821090935708.dkr.ecr.eu-west-1.amazonaws.com/actions-runner:1d7a0fc2d7a3cfff9893c375c49ee93f28e90a8a

## User/env config in container
# Re-map user-id since our runner images run as user 1001
--container-options="--userns=keep-id:uid=1001,gid=1001"
# Homedir wasn't writeable on our EC2 runners, but ARC-runners are OK
# --env=HOME=/tmp/github/home

## Events, secrets, and config
--eventpath=.event.json

## Mounts
# Mount common dependencies as a volume
--container-options="-v=dependencies:/home/runner/dependencies"
# Yarn needs it cache folder to exist, and won't try to create them; mounting here to create the folder
--container-options="-v=dependencies-yarn:/home/runner/dependencies/.yarn/cache"


## Remote actions
# To run fully local/offline (only fetches actions when missing, on first run),
# unset or override via CLI to update your cached actions
--pull=false
--action-offline-mode=true
