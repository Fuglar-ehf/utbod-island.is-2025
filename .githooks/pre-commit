#!/usr/bin/bash

: "${GIT_ROOT:="$(git rev-parse --show-toplevel)"}"

if git rev-parse --verify HEAD >/dev/null 2>&1
then
	against=HEAD
else
	# Initial commit: diff against an empty tree object
	against=$(git hash-object -t tree /dev/null)
fi

# If there are whitespace errors, print the offending file names
git diff-index --check --cached "$against" -- \
  || echo "You have some trailing whitespaces ðŸ™ˆ" 

exec "$GIT_ROOT/.githooks/defaulthook" pre-commit
