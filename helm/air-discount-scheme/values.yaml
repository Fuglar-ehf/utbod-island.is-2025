# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

global:
  image:
    tag: latest_master

air-discount-scheme-api:
  namespace: air-discount-scheme
  image:
    repository: 821090935708.dkr.ecr.eu-west-1.amazonaws.com/air-discount-scheme-api
  env:
    BACKEND_URL: "http://web-air-discount-scheme-backend"
  secrets:
    AUTH_JWT_SECRET: "/k8s/air-discount-scheme/api/AUTH_JWT_SECRET"
  healthCheck:
    livenessPath: /liveness
  ingress:
    enabled: true
  service:
    targetPort: 4242
  serviceAccount:
    create: false
  initContainer:
    create: false

air-discount-scheme-web:
  namespace: air-discount-scheme
  image:
    repository: 821090935708.dkr.ecr.eu-west-1.amazonaws.com/air-discount-scheme-web
  ingress:
    enabled: true
  service:
    targetPort: 4200
  serviceAccount:
    create: false
  initContainer:
    create: false

air-discount-scheme-backend:
  namespace: air-discount-scheme
  image:
    repository: 821090935708.dkr.ecr.eu-west-1.amazonaws.com/air-discount-scheme-backend
  secrets:
    DB_PASS: '/k8s/air-discount-scheme/backend/DB_PASSWORD'
  healthCheck:
    livenessPath: /liveness
  ingress:
    enabled: true
  service:
    targetPort: 4248
  serviceAccount:
    create: false
  initContainer:
    create: true
    command: ["npx"]
    args: ["sequelize-cli", "db:migrate"]
    secrets:
      DB_PASS: '/k8s/air-discount-scheme/backend/DB_PASSWORD'
