auth-admin-api:
  enabled: true
  env:
    DB_REPLICAS_HOST: ''
    IDENTITY_SERVER_ISSUER_URL: 'https://innskra.island.is'
    IDS_ISSUER: 'https://innskra.island.is'
    NODE_OPTIONS: '--max-old-space-size=208'
    SERVERSIDE_FEATURES_ON: 'driving-license-use-v1-endpoint-for-v2-comms'
  grantNamespaces: []
  grantNamespacesEnabled: false
  healthCheck:
    liveness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
    readiness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
  hpa:
    scaling:
      metric:
        cpuAverageUtilization: 70
        nginxRequestsIrate: 2
      replicas:
        max: 10
        min: 3
  image:
    repository: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/auth-admin-api'
  ingress:
    primary-alb:
      annotations:
        kubernetes.io/ingress.class: 'nginx-external-alb'
      hosts:
        - host: 'innskra.island.is'
          paths:
            - '/backend'
  namespace: 'identity-server'
  replicaCount:
    default: 3
    max: 10
    min: 3
  resources:
    limits:
      cpu: '200m'
      memory: '256Mi'
    requests:
      cpu: '100m'
      memory: '128Mi'
  secrets:
    CONFIGCAT_SDK_KEY: '/k8s/configcat/CONFIGCAT_SDK_KEY'
  securityContext:
    allowPrivilegeEscalation: false
    privileged: false
auth-admin-web:
  enabled: true
  env:
    BASE_URL: 'https://innskra.island.is/admin'
    IDENTITYSERVER_DOMAIN: 'innskra.island.is'
    IDENTITYSERVER_ID: 'identity-server'
    NEXTAUTH_URL: 'https://innskra.island.is/admin/api/auth'
    NODE_OPTIONS: '--max-old-space-size=208'
    SERVERSIDE_FEATURES_ON: 'driving-license-use-v1-endpoint-for-v2-comms'
  grantNamespaces: []
  grantNamespacesEnabled: false
  healthCheck:
    liveness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
    readiness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
  hpa:
    scaling:
      metric:
        cpuAverageUtilization: 70
        nginxRequestsIrate: 2
      replicas:
        max: 10
        min: 3
  image:
    repository: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/auth-admin-web'
  ingress:
    primary-alb:
      annotations:
        kubernetes.io/ingress.class: 'nginx-external-alb'
      hosts:
        - host: 'innskra.island.is'
          paths:
            - '/admin'
  namespace: 'identity-server'
  replicaCount:
    default: 3
    max: 10
    min: 3
  resources:
    limits:
      cpu: '200m'
      memory: '256Mi'
    requests:
      cpu: '100m'
      memory: '128Mi'
  secrets:
    CONFIGCAT_SDK_KEY: '/k8s/configcat/CONFIGCAT_SDK_KEY'
  securityContext:
    allowPrivilegeEscalation: false
    privileged: false
auth-api:
  enabled: true
  env:
    COMPANY_REGISTRY_XROAD_PROVIDER_ID: 'IS/GOV/5402696029/Skatturinn/ft-v1'
    DB_REPLICAS_HOST: ''
    IDENTITY_SERVER_ISSUER_URL: 'https://innskra.island.is'
    IDS_ISSUER: 'https://innskra.island.is'
    NODE_OPTIONS: '--max-old-space-size=208'
    PUBLIC_URL: 'https://innskra.island.is/api'
    SERVERSIDE_FEATURES_ON: 'driving-license-use-v1-endpoint-for-v2-comms'
    XROAD_BASE_PATH: 'http://securityserver.island.is'
    XROAD_BASE_PATH_WITH_ENV: 'http://securityserver.island.is/r1/IS'
    XROAD_CLIENT_ID: 'IS/GOV/5501692829/island-is-client'
    XROAD_NATIONAL_REGISTRY_API_PATH: '/SKRA-Protected/Einstaklingar-v1'
    XROAD_NATIONAL_REGISTRY_CLIENT_ID: 'IS/GOV/5501692829/island-is-client'
    XROAD_NATIONAL_REGISTRY_MEMBER_CODE: '6503760649'
    XROAD_NATIONAL_REGISTRY_REDIS_NODES: '["clustercfg.general-redis-cluster-group.dnugi2.euw1.cache.amazonaws.com:6379"]'
    XROAD_NATIONAL_REGISTRY_SERVICE_PATH: 'IS/GOV/6503760649/SKRA-Protected/Einstaklingar-v1'
    XROAD_RSK_MEMBER_CODE: '5402696029'
    XROAD_RSK_PROCURING_PATH: 'IS/GOV/5402696029/Skatturinn/prokura-v1'
    XROAD_RSK_PROCURING_REDIS_NODES: '["clustercfg.general-redis-cluster-group.dnugi2.euw1.cache.amazonaws.com:6379"]'
    XROAD_TLS_BASE_PATH: 'https://securityserver.island.is'
    XROAD_TLS_BASE_PATH_WITH_ENV: 'https://securityserver.island.is/r1/IS'
  grantNamespaces: []
  grantNamespacesEnabled: false
  healthCheck:
    liveness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
    readiness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
  hpa:
    scaling:
      metric:
        cpuAverageUtilization: 70
        nginxRequestsIrate: 2
      replicas:
        max: 10
        min: 3
  image:
    repository: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/auth-api'
  ingress:
    primary-alb:
      annotations:
        kubernetes.io/ingress.class: 'nginx-external-alb'
      hosts:
        - host: 'innskra.island.is'
          pathType: 'Prefix'
          paths:
            - '/api(/|$)(.*)'
  namespace: 'identity-server'
  replicaCount:
    default: 3
    max: 10
    min: 3
  resources:
    limits:
      cpu: '200m'
      memory: '256Mi'
    requests:
      cpu: '100m'
      memory: '128Mi'
  secrets:
    CONFIGCAT_SDK_KEY: '/k8s/configcat/CONFIGCAT_SDK_KEY'
  securityContext:
    allowPrivilegeEscalation: false
    privileged: false
auth-public-api:
  enabled: true
  env:
    IDENTITY_SERVER_ISSUER_URL: 'https://innskra.island.is'
    IDS_ISSUER: 'https://innskra.island.is'
    NODE_OPTIONS: '--max-old-space-size=208'
    PUBLIC_URL: 'https://innskra.island.is/api'
    SERVERSIDE_FEATURES_ON: 'driving-license-use-v1-endpoint-for-v2-comms'
    XROAD_BASE_PATH: 'http://securityserver.island.is'
    XROAD_BASE_PATH_WITH_ENV: 'http://securityserver.island.is/r1/IS'
    XROAD_CLIENT_ID: 'IS/GOV/5501692829/island-is-client'
    XROAD_NATIONAL_REGISTRY_API_PATH: '/SKRA-Protected/Einstaklingar-v1'
    XROAD_NATIONAL_REGISTRY_CLIENT_ID: 'IS/GOV/5501692829/island-is-client'
    XROAD_NATIONAL_REGISTRY_MEMBER_CODE: '6503760649'
    XROAD_NATIONAL_REGISTRY_REDIS_NODES: '["clustercfg.general-redis-cluster-group.dnugi2.euw1.cache.amazonaws.com:6379"]'
    XROAD_NATIONAL_REGISTRY_SERVICE_PATH: 'IS/GOV/6503760649/SKRA-Protected/Einstaklingar-v1'
    XROAD_RSK_MEMBER_CODE: '5402696029'
    XROAD_RSK_PROCURING_PATH: 'IS/GOV/5402696029/Skatturinn/prokura-v1'
    XROAD_RSK_PROCURING_REDIS_NODES: '["clustercfg.general-redis-cluster-group.dnugi2.euw1.cache.amazonaws.com:6379"]'
    XROAD_TLS_BASE_PATH: 'https://securityserver.island.is'
    XROAD_TLS_BASE_PATH_WITH_ENV: 'https://securityserver.island.is/r1/IS'
  grantNamespaces: []
  grantNamespacesEnabled: false
  healthCheck:
    liveness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
    readiness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
  hpa:
    scaling:
      metric:
        cpuAverageUtilization: 70
        nginxRequestsIrate: 2
      replicas:
        max: 10
        min: 3
  image:
    repository: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/auth-public-api'
  ingress:
    primary-alb:
      annotations:
        kubernetes.io/ingress.class: 'nginx-external-alb'
      hosts:
        - host: 'innskra.island.is'
          pathType: 'Prefix'
          paths:
            - '/api(/|$)(.*)'
  namespace: 'identity-server'
  replicaCount:
    default: 3
    max: 10
    min: 3
  resources:
    limits:
      cpu: '200m'
      memory: '256Mi'
    requests:
      cpu: '100m'
      memory: '128Mi'
  secrets:
    CONFIGCAT_SDK_KEY: '/k8s/configcat/CONFIGCAT_SDK_KEY'
  securityContext:
    allowPrivilegeEscalation: false
    privileged: false
global:
  env:
    AUDIT_GROUP_NAME: '/island-is/audit-log'
    AWS_REGION: 'eu-west-1'
    PORT: '3333'
    name: 'prod'
  image:
    tag: 'latest_master'
  initContainer:
    env:
      AWS_REGION: 'eu-west-1'
identity-server:
  enabled: true
  env:
    AWS__SystemsManager__ParameterStore__DataProtectionPrefix: '/k8s/identity-server/DataProtectionSecret'
    Application__MinCompletionPortThreads: '10'
    CacheSettings__Enabled: 'true'
    CacheSettings__Memcached__Address: 'identity-server.dnugi2.cfg.euw1.cache.amazonaws.com'
    CacheSettings__Memcached__Port: '11211'
    CacheSettings__Redis__Address: 'clustercfg.general-redis-cluster-group.dnugi2.euw1.cache.amazonaws.com'
    CacheSettings__Redis__Port: '6379'
    IdentityServer__EnableDelegation: ''
    IdentityServer__EnableFakeLogin: 'true'
    IdentityServer__EnableFeatureDeploymentWildcards: 'https://innskra.island.is'
    NODE_OPTIONS: '--max-old-space-size=208'
    PersistenceSettings__BaseAddress: 'http://web-services-auth-api'
    PersistenceSettings__UserProfileBaseAddress: 'http://web-service-portal-api.service-portal.svc.cluster.local'
    SERVERSIDE_FEATURES_ON: 'driving-license-use-v1-endpoint-for-v2-comms'
  grantNamespaces: []
  grantNamespacesEnabled: false
  healthCheck:
    liveness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
    readiness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
  hpa:
    scaling:
      metric:
        cpuAverageUtilization: 70
        nginxRequestsIrate: 2
      replicas:
        max: 10
        min: 3
  image:
    repository: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/identity-server'
  ingress:
    primary-alb:
      annotations:
        kubernetes.io/ingress.class: 'nginx-external-alb'
      hosts:
        - host: 'innskra.island.is'
          paths:
            - '/'
  namespace: 'identity-server'
  podSecurityContext:
    fsGroup: 65534
  replicaCount:
    default: 3
    max: 10
    min: 3
  resources:
    limits:
      cpu: '200m'
      memory: '256Mi'
    requests:
      cpu: '100m'
      memory: '128Mi'
  secrets:
    AudkenniSettings__ClientId: '/k8s/identity-server/AudkenniClientId'
    AudkenniSettings__ClientSecret: '/k8s/identity-server/AudkenniClientSecret'
    CONFIGCAT_SDK_KEY: '/k8s/configcat/CONFIGCAT_SDK_KEY'
    FeatureFlags__ConfigCatSdkKey: '/k8s/configcat/CONFIGCAT_SDK_KEY'
    IdentityServer__FakePersons: '/k8s/identity-server/FakePersons'
    IdentityServer__SigningCertificate__Passphrase: '/k8s/identity-server/SigningCertificatePassphrase'
    PersistenceSettings__AccessTokenManagementSettings__ClientSecret: '/k8s/identity-server/ClientSecret'
    Scopes__Admin__RootAccessList: '/k8s/identity-server/AdminRootAccessList'
  securityContext:
    allowPrivilegeEscalation: false
    privileged: false
  serviceAccount:
    annotations:
      eks.amazonaws.com/role-arn: 'arn:aws:iam::251502586493:role/identity-server'
    create: true
    name: 'identity-server'
namespaces:
  labels: {}
  namespaces:
    - 'identity-server'
personal-representative:
  enabled: true
  env:
    IDENTITY_SERVER_ISSUER_URL: 'https://innskra.island.is'
    IDS_ISSUER: 'https://innskra.island.is'
    NODE_OPTIONS: '--max-old-space-size=208'
    SERVERSIDE_FEATURES_ON: 'driving-license-use-v1-endpoint-for-v2-comms'
  grantNamespaces: []
  grantNamespacesEnabled: false
  healthCheck:
    liveness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
    readiness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
  hpa:
    scaling:
      metric:
        cpuAverageUtilization: 70
        nginxRequestsIrate: 2
      replicas:
        max: 10
        min: 3
  image:
    repository: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/personal-representative'
  ingress:
    demoALB-alb:
      annotations:
        kubernetes.io/ingress.class: 'nginx-external-alb'
      hosts:
        - host: 'island.is'
          paths:
            - '/'
    primary-alb:
      annotations:
        kubernetes.io/ingress.class: 'nginx-internal-alb'
      hosts:
        - host: 'personal-representative-xrd.internal.innskra.island.is'
          paths:
            - '/'
  namespace: 'identity-server'
  replicaCount:
    default: 3
    max: 10
    min: 3
  resources:
    limits:
      cpu: '200m'
      memory: '256Mi'
    requests:
      cpu: '100m'
      memory: '128Mi'
  secrets:
    CONFIGCAT_SDK_KEY: '/k8s/configcat/CONFIGCAT_SDK_KEY'
  securityContext:
    allowPrivilegeEscalation: false
    privileged: false
personal-representative-public:
  enabled: true
  env:
    DB_REPLICAS_HOST: ''
    IDENTITY_SERVER_ISSUER_URL: 'https://innskra.island.is'
    IDS_ISSUER: 'https://innskra.island.is'
    NODE_OPTIONS: '--max-old-space-size=208'
    SERVERSIDE_FEATURES_ON: 'driving-license-use-v1-endpoint-for-v2-comms'
  grantNamespaces: []
  grantNamespacesEnabled: false
  healthCheck:
    liveness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
    readiness:
      initialDelaySeconds: 3
      path: '/liveness'
      timeoutSeconds: 3
  hpa:
    scaling:
      metric:
        cpuAverageUtilization: 70
        nginxRequestsIrate: 2
      replicas:
        max: 10
        min: 3
  image:
    repository: '821090935708.dkr.ecr.eu-west-1.amazonaws.com/personal-representative-public'
  ingress:
    demoALB-alb:
      annotations:
        kubernetes.io/ingress.class: 'nginx-external-alb'
      hosts:
        - host: 'island.is'
          paths:
            - '/'
    primary-alb:
      annotations:
        kubernetes.io/ingress.class: 'nginx-internal-alb'
      hosts:
        - host: 'personal-representative-xrd.internal.innskra.island.is'
          paths:
            - '/'
  namespace: 'identity-server'
  replicaCount:
    default: 3
    max: 10
    min: 3
  resources:
    limits:
      cpu: '200m'
      memory: '256Mi'
    requests:
      cpu: '100m'
      memory: '128Mi'
  secrets:
    CONFIGCAT_SDK_KEY: '/k8s/configcat/CONFIGCAT_SDK_KEY'
  securityContext:
    allowPrivilegeEscalation: false
    privileged: false
