{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Paginator from \"./Paginator\";\nimport Link from \"next/link\";\n\nclass Clients extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      clients: [],\n      rowCount: 0\n    });\n\n    _defineProperty(this, \"page\", 1);\n\n    _defineProperty(this, \"lastPage\", 0);\n\n    _defineProperty(this, \"count\", 1);\n\n    _defineProperty(this, \"componentDidMount\", async () => {\n      const response = await axios.get(`./clients?page=${this.page}&count=${this.count}`);\n      console.log(response);\n      this.setState(this.state = {\n        clients: response.data.rows,\n        rowCount: response.data.count\n      }); // this.lastPage = response.data.lastpage;\n\n      this.lastPage = Math.ceil(this.state.rowCount / this.count);\n      console.log(\"Lastpage: \" + this.lastPage);\n      console.log(response.data);\n    });\n\n    _defineProperty(this, \"handlePageChange\", async page => {\n      this.page = page;\n      await this.componentDidMount();\n    });\n\n    _defineProperty(this, \"delete\", async clientId => {\n      if (window.confirm(\"Ertu viss um að þú viljir eyða þessari færslu?\")) {\n        const response = await axios.delete(`./clients/${clientId}`);\n        console.log(response);\n        await this.componentDidMount();\n      }\n    });\n\n    _defineProperty(this, \"edit\", async client => {\n      console.log(client);\n    });\n  }\n\n  changeCount(count) {\n    this.count = +count;\n    this.page = 1;\n    console.log(this.page);\n    this.componentDidMount();\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: \"clients__container\"\n    }, __jsx(\"h2\", null, \"Vefir og sm\\xE1forrit\"), __jsx(\"div\", {\n      className: \"clients__container__options\"\n    }, __jsx(\"div\", {\n      className: \"clients__container__button\"\n    }, __jsx(Link, {\n      href: \"/client\"\n    }, __jsx(\"a\", {\n      className: \"clients__button__new\"\n    }, \"B\\xE6ta vi\\xF0 n\\xFDjum\"))), __jsx(\"div\", {\n      className: \"clients__container__field\"\n    }, __jsx(\"label\", {\n      htmlFor: \"count\",\n      className: \"clients__label\"\n    }, \"Fj\\xF6ldi \\xE1 s\\xED\\xF0u\"), __jsx(\"select\", {\n      id: \"count\",\n      onChange: e => this.changeCount(e.target.value),\n      className: \"clients__select\"\n    }, __jsx(\"option\", {\n      value: \"1\"\n    }, \"1\"), __jsx(\"option\", {\n      value: \"30\"\n    }, \"30\"), __jsx(\"option\", {\n      value: \"50\"\n    }, \"50\"), __jsx(\"option\", {\n      value: \"100\"\n    }, \"100\")))), __jsx(\"div\", {\n      className: \"client__container__table\"\n    }, __jsx(\"table\", {\n      className: \"clients__table\"\n    }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"Au\\xF0kenni\"), __jsx(\"th\", null, \"Identity token lifetime\"), __jsx(\"th\", {\n      colSpan: 2\n    }))), __jsx(\"tbody\", null, this.state.clients.map(client => {\n      return __jsx(\"tr\", {\n        key: client.clientId\n      }, __jsx(\"td\", null, client.clientId), __jsx(\"td\", null, client.identityTokenLifetime), __jsx(\"td\", null, __jsx(\"button\", {\n        className: \"clients__button__edit\",\n        onClick: () => this.edit(client)\n      }, \"Breyta\")), __jsx(\"td\", null, __jsx(\"button\", {\n        className: \"clients__button__delete\",\n        onClick: () => this.delete(client.clientId)\n      }, \"Ey\\xF0a\")));\n    })))), __jsx(Paginator, {\n      lastPage: this.lastPage,\n      handlePageChange: this.handlePageChange\n    }));\n  }\n\n}\n\nexport default Clients;","map":{"version":3,"sources":["C:/Users/usb/Documents/GitHub/ids/apps/auth-admin-web/components/Clients.tsx"],"names":["React","Component","axios","Paginator","Link","Clients","clients","rowCount","response","get","page","count","console","log","setState","state","data","rows","lastPage","Math","ceil","componentDidMount","clientId","window","confirm","delete","client","changeCount","render","e","target","value","map","identityTokenLifetime","edit","handlePageChange"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport ClientDTO from \"../models/dtos/client-dto\";\r\nimport Paginator from \"./Paginator\";\r\nimport Link from \"next/link\";\r\n\r\nclass Clients extends Component {\r\n  state = {\r\n    clients: [],\r\n    rowCount: 0,\r\n  };\r\n\r\n  page = 1;\r\n  lastPage = 0;\r\n  count = 1;\r\n\r\n  componentDidMount = async () => {\r\n    const response = await axios.get(\r\n      `./clients?page=${this.page}&count=${this.count}`\r\n    );\r\n    console.log(response);\r\n    this.setState(\r\n      (this.state = {\r\n        clients: response.data.rows,\r\n        rowCount: response.data.count,\r\n      })\r\n    );\r\n\r\n    // this.lastPage = response.data.lastpage;\r\n    this.lastPage = Math.ceil(this.state.rowCount / this.count);\r\n    console.log(\"Lastpage: \" + this.lastPage);\r\n\r\n    console.log(response.data);\r\n  };\r\n\r\n  handlePageChange = async (page: number) => {\r\n    this.page = page;\r\n    await this.componentDidMount();\r\n  };\r\n\r\n  delete = async (clientId: string) => {\r\n    if (window.confirm(\"Ertu viss um að þú viljir eyða þessari færslu?\")) {\r\n      const response = await axios.delete(`./clients/${clientId}`);\r\n      console.log(response);\r\n      await this.componentDidMount();\r\n    }\r\n  };\r\n\r\n  edit = async (client: ClientDTO) => {\r\n    console.log(client);\r\n  };\r\n\r\n  changeCount(count: string) {\r\n    this.count = +count;\r\n    this.page = 1;\r\n    console.log(this.page);\r\n    this.componentDidMount();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"clients__container\">\r\n        <h2>Vefir og smáforrit</h2>\r\n        <div className=\"clients__container__options\">\r\n          <div className=\"clients__container__button\">\r\n            <Link href={\"/client\"}>\r\n              <a className=\"clients__button__new\">Bæta við nýjum</a>\r\n            </Link>\r\n          </div>\r\n          <div className=\"clients__container__field\">\r\n            <label htmlFor=\"count\" className=\"clients__label\">\r\n              Fjöldi á síðu\r\n            </label>\r\n            <select\r\n              id=\"count\"\r\n              onChange={(e) => this.changeCount(e.target.value)}\r\n              className=\"clients__select\"\r\n            >\r\n              <option value=\"1\">1</option>\r\n              <option value=\"30\">30</option>\r\n              <option value=\"50\">50</option>\r\n              <option value=\"100\">100</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"client__container__table\">\r\n          <table className=\"clients__table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Auðkenni</th>\r\n                <th>Identity token lifetime</th>\r\n                <th colSpan={2}></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.clients.map((client: ClientDTO) => {\r\n                return (\r\n                  <tr key={client.clientId}>\r\n                    <td>{client.clientId}</td>\r\n                    <td>{client.identityTokenLifetime}</td>\r\n                    <td>\r\n                      <button\r\n                        className=\"clients__button__edit\"\r\n                        onClick={() => this.edit(client)}\r\n                      >\r\n                        Breyta\r\n                      </button>\r\n                    </td>\r\n                    <td>\r\n                      <button\r\n                        className=\"clients__button__delete\"\r\n                        onClick={() => this.delete(client.clientId)}\r\n                      >\r\n                        Eyða\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <Paginator\r\n          lastPage={this.lastPage}\r\n          handlePageChange={this.handlePageChange}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Clients;\r\n"]},"metadata":{},"sourceType":"module"}