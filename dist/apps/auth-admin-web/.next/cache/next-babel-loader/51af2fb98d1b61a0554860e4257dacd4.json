{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Paginator from './Paginator';\nimport Link from 'next/link';\n\nvar Clients = /*#__PURE__*/function (_Component) {\n  _inherits(Clients, _Component);\n\n  var _super = _createSuper(Clients);\n\n  function Clients() {\n    var _this;\n\n    _classCallCheck(this, Clients);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      clients: [],\n      rowCount: 0,\n      lastPage: 0,\n      count: 1,\n      page: 1\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.get(\"/api/clients?page=\".concat(_this.state.page, \"&count=\").concat(_this.state.count));\n\n            case 2:\n              response = _context.sent;\n              console.log(response);\n\n              _this.setState({\n                clients: response.data.rows,\n                rowCount: response.data.count,\n                lastPage: Math.ceil(_this.state.rowCount / _this.state.count)\n              });\n\n              console.log(response.data);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"handlePageChange\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(page) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this.state.page = page;\n                _context2.next = 3;\n                return _this.componentDidMount();\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"delete\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(clientId) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!window.confirm('Ertu viss um að þú viljir eyða þessari færslu?')) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                _context3.next = 3;\n                return axios[\"delete\"](\"./clients/\".concat(clientId));\n\n              case 3:\n                response = _context3.sent;\n                console.log(response);\n                _context3.next = 7;\n                return _this.componentDidMount();\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"edit\", /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(client) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                console.log(client);\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x3) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n\n    return _this;\n  }\n\n  _createClass(Clients, [{\n    key: \"changeCount\",\n    value: function changeCount(count) {\n      console.log(\"change count \" + count);\n      this.setState({\n        count: +count,\n        page: 1\n      });\n      console.log(this.state);\n      this.componentDidMount();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(\"div\", {\n        className: \"clients__container\"\n      }, __jsx(\"h2\", null, \"Vefir og sm\\xE1forrit\"), __jsx(\"div\", {\n        className: \"clients__container__options\"\n      }, __jsx(\"div\", {\n        className: \"clients__container__button\"\n      }, __jsx(Link, {\n        href: '/client'\n      }, __jsx(\"a\", {\n        className: \"clients__button__new\"\n      }, \"B\\xE6ta vi\\xF0 n\\xFDjum\"))), __jsx(\"div\", {\n        className: \"clients__container__field\"\n      }, __jsx(\"label\", {\n        htmlFor: \"count\",\n        className: \"clients__label\"\n      }, \"Fj\\xF6ldi \\xE1 s\\xED\\xF0u\"), __jsx(\"select\", {\n        id: \"count\",\n        onChange: function onChange(e) {\n          return _this2.changeCount(e.target.value);\n        },\n        className: \"clients__select\"\n      }, __jsx(\"option\", {\n        value: \"1\"\n      }, \"1\"), __jsx(\"option\", {\n        value: \"30\"\n      }, \"30\"), __jsx(\"option\", {\n        value: \"50\"\n      }, \"50\"), __jsx(\"option\", {\n        value: \"100\"\n      }, \"100\")))), __jsx(\"div\", {\n        className: \"client__container__table\"\n      }, __jsx(\"table\", {\n        className: \"clients__table\"\n      }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"Au\\xF0kenni\"), __jsx(\"th\", null, \"Identity token lifetime\"), __jsx(\"th\", {\n        colSpan: 2\n      }))), __jsx(\"tbody\", null, this.state.clients.map(function (client) {\n        return __jsx(\"tr\", {\n          key: client.clientId\n        }, __jsx(\"td\", null, client.clientId), __jsx(\"td\", null, client.identityTokenLifetime), __jsx(\"td\", null, __jsx(\"button\", {\n          className: \"clients__button__edit\",\n          onClick: function onClick() {\n            return _this2.edit(client);\n          }\n        }, \"Breyta\")), __jsx(\"td\", null, __jsx(\"button\", {\n          className: \"clients__button__delete\",\n          onClick: function onClick() {\n            return _this2[\"delete\"](client.clientId);\n          }\n        }, \"Ey\\xF0a\")));\n      })))), __jsx(Paginator, {\n        lastPage: this.state.lastPage,\n        handlePageChange: this.handlePageChange\n      }));\n    }\n  }]);\n\n  return Clients;\n}(Component);\n\nexport default Clients;","map":{"version":3,"sources":["C:/Users/usb/Documents/GitHub/ids/apps/auth-admin-web/components/Clients.tsx"],"names":["React","Component","axios","Paginator","Link","Clients","clients","rowCount","lastPage","count","page","get","state","response","console","log","setState","data","rows","Math","ceil","componentDidMount","clientId","window","confirm","client","e","changeCount","target","value","map","identityTokenLifetime","edit","handlePageChange"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport ClientDTO from '../models/dtos/client-dto';\r\nimport Paginator from './Paginator';\r\nimport Link from 'next/link';\r\n\r\nclass Clients extends Component {\r\n  state = {\r\n    clients: [],\r\n    rowCount: 0,\r\n    lastPage: 0,\r\n    count: 1,\r\n    page: 1,\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    const response = await axios.get(\r\n      `/api/clients?page=${this.state.page}&count=${this.state.count}`\r\n    );\r\n    console.log(response);\r\n    this.setState({\r\n      clients: response.data.rows,\r\n      rowCount: response.data.count,\r\n      lastPage: Math.ceil(this.state.rowCount / this.state.count),\r\n    });\r\n\r\n    console.log(response.data);\r\n  };\r\n\r\n  handlePageChange = async (page: number) => {\r\n    this.state.page = page;\r\n    await this.componentDidMount();\r\n  };\r\n\r\n  delete = async (clientId: string) => {\r\n    if (window.confirm('Ertu viss um að þú viljir eyða þessari færslu?')) {\r\n      const response = await axios.delete(`./clients/${clientId}`);\r\n      console.log(response);\r\n      await this.componentDidMount();\r\n    }\r\n  };\r\n\r\n  edit = async (client: ClientDTO) => {\r\n    console.log(client);\r\n  };\r\n\r\n  changeCount(count: string) {\r\n    console.log(\"change count \" + count)\r\n    this.setState({\r\n      count: +count,\r\n      page: 1,\r\n    });\r\n\r\n    console.log(this.state)\r\n\r\n    this.componentDidMount();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"clients__container\">\r\n        <h2>Vefir og smáforrit</h2>\r\n        <div className=\"clients__container__options\">\r\n          <div className=\"clients__container__button\">\r\n            <Link href={'/client'}>\r\n              <a className=\"clients__button__new\">Bæta við nýjum</a>\r\n            </Link>\r\n          </div>\r\n          <div className=\"clients__container__field\">\r\n            <label htmlFor=\"count\" className=\"clients__label\">\r\n              Fjöldi á síðu\r\n            </label>\r\n            <select\r\n              id=\"count\"\r\n              onChange={(e) => this.changeCount(e.target.value)}\r\n              className=\"clients__select\"\r\n            >\r\n              <option value=\"1\">1</option>\r\n              <option value=\"30\">30</option>\r\n              <option value=\"50\">50</option>\r\n              <option value=\"100\">100</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"client__container__table\">\r\n          <table className=\"clients__table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Auðkenni</th>\r\n                <th>Identity token lifetime</th>\r\n                <th colSpan={2}></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.clients.map((client: ClientDTO) => {\r\n                return (\r\n                  <tr key={client.clientId}>\r\n                    <td>{client.clientId}</td>\r\n                    <td>{client.identityTokenLifetime}</td>\r\n                    <td>\r\n                      <button\r\n                        className=\"clients__button__edit\"\r\n                        onClick={() => this.edit(client)}\r\n                      >\r\n                        Breyta\r\n                      </button>\r\n                    </td>\r\n                    <td>\r\n                      <button\r\n                        className=\"clients__button__delete\"\r\n                        onClick={() => this.delete(client.clientId)}\r\n                      >\r\n                        Eyða\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <Paginator\r\n          lastPage={this.state.lastPage}\r\n          handlePageChange={this.handlePageChange}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Clients;\r\n"]},"metadata":{},"sourceType":"module"}