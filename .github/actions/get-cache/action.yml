name: 'Get Cache Keys'
description: 'Action to get cache'
inputs:
  enable-cache:
    description: 'Enable cache'
    default: ''
  keys:
    description: 'Keys'
    default: 'false'
  cypress-path:
    description: 'Path to cypress'
    default: '/github/home/.cache/Cypress'
outputs:
  success:
    description: 'Success'
    value: ${{ steps.run-post-cache.outputs.success }}
  keys:
    description: 'Keys'
    value: ${{ steps.get-cache-keys.outputs._CACHE_KEYS }}
runs:
  using: 'composite'
  steps:
    - name: Add required env
    uses: actions/github-script@v7
    env:
      github-token: ${{ secrets.GITHUB_TOKEN }}
    with:
      script: |
        core.exportVariable('ACTIONS_RUNTIME_TOKEN', process.env['ACTIONS_RUNTIME_TOKEN'])
    - name: Get cache
      id: prepare
      shell: bash
      env:
        ENABLE_CACHE: ${{ inputs.enable-cache }}
        CYPRESS_PATH: ${{ inputs.cypress-path }}
        YAML_FILE: ./.tmp-dynamic-cache/action.yml
      run: |
        cd scripts/ci/cache
        yarn install --immutable
        node cache-action.mjs
    